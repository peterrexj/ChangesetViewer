<UserControl x:Class="ChangesetViewer.UI.View.ChangesetViewerMainWindow"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ChangesetViewer.UI"
             mc:Ignorable="d">
    <!--<UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="..\Themes\ExpressionDark.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>-->

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Themes/MetroDark/MetroDark.MSControls.Core.Implicit.xaml" />
                <ResourceDictionary Source="../Themes/StaticStyles.xaml" />

                <!--<ResourceDictionary Source="../Themes/MetroDark/MetroDark.MSControls.Toolkit.Implicit.xaml" />-->
                <!--<ResourceDictionary Source="pack://application:,,,/ChangesetViewer.UI;component/Themes/Office2013/Office2013.MSControls.Core.Implicit.xaml" />
                <ResourceDictionary Source="pack://application:,,,/ChangesetViewer.UI;component/Themes/Office2013/Office2013.MSControls.Toolkit.Implicit.xaml" />-->
            </ResourceDictionary.MergedDictionaries>

            <SolidColorBrush x:Key="BackgroundKey" Color="#FF181818" />
            <SolidColorBrush x:Key="ForegroundKey" Color="#FFEFEFEF" />
            <SolidColorBrush x:Key="ForegroundKeyError" Color="#FFB24848" />

        </ResourceDictionary>
    </UserControl.Resources>

    <DockPanel>
        <Grid DockPanel.Dock="Top" Background="{StaticResource BackgroundKey}">
            <StackPanel Orientation="Vertical">
                <TextBlock Margin="5" HorizontalAlignment="Left" Foreground="{StaticResource ForegroundKey}" FontSize="16" >Changesets Viewer</TextBlock>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="10" />
                        <ColumnDefinition Width="140" />
                        <ColumnDefinition Width="10" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="30" />
                        <RowDefinition Height="30" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <Button x:Name="btnSelectServerPath" Grid.Column="1" Grid.Row="0" IsEnabled="false"
                            Content="  Server Path ...  " Click="btnSelectServerPath_Click"/>
                    <TextBox Grid.Column="3" Grid.Row="0" DockPanel.Dock="Right" Height="23" 
                             Style="{StaticResource TextblockStyle}"
                                 TextWrapping="Wrap" Text="$/CLS/Src/Dev" x:Name="txtSource" 
                                 VerticalContentAlignment="Center" BorderThickness="0,0,0,1" FontSize="12" />
                    <Label Grid.Column="1" Grid.Row="1" 
                           Style="{StaticResource LabelStyle}"
                           HorizontalAlignment="Left"
                           Content="Search Text" Width="85" />
                    <TextBox Grid.Column="3" Grid.Row="1" x:Name="txtSearchText" DockPanel.Dock="Top"
                                 Style="{StaticResource TextblockStyle}"
                                 TextWrapping="Wrap" 
                                 VerticalContentAlignment="Top"
                                 BorderThickness="0,0,0,1"
                                 VerticalAlignment="Top" AcceptsReturn="True" VerticalScrollBarVisibility="Auto" Height="70" FontSize="12"
                             />
                    <Grid Grid.Column="3" Grid.Row="2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="10*"  />
                            <ColumnDefinition Width="1*"  />
                            <ColumnDefinition Width="8*" />
                        </Grid.ColumnDefinitions>
                        <ComboBox Grid.Column="0" Grid.Row="1" x:Name="cboSearchType" DockPanel.Dock="Bottom" SelectedIndex="0" FontSize="12" Background="{DynamicResource BackgroundKey}"></ComboBox>
                        <GridSplitter Grid.Column="1" Grid.Row="1"/>
                        <CheckBox Grid.Column="2" Grid.Row="1" x:Name="chkSearchBasedOnRegex" Content="Search Pattern Regex" 
                                IsEnabled="False" FontSize="12" HorizontalAlignment="Center" />
                    </Grid>


                    <Label Grid.Column="1" Grid.Row="3" 
                           Style="{StaticResource LabelStyle}"
                           HorizontalAlignment="Left"
                           Content="By user" Width="75" />
                    <MediaElement Grid.Column="1" Grid.Row="3" HorizontalAlignment="Right"
                            x:Name="loaderUser_Gif" 
                            Source="Images/loader01.gif" 
                            MediaEnded="loader_Gif_MediaEnded" 
                            UnloadedBehavior="Manual" 
                            LoadedBehavior="Manual"  
                            Stretch="Fill" Height="20" MediaFailed="loader_Gif_MediaFailed" 
                            Width="20"/>
                    <ComboBox Grid.Column="3" Grid.Row="3" x:Name="lstUsers" 
                          IsEditable="True"
                          TextSearch.TextPath="DisplayName" 
                          DropDownOpened="lstUsers_DropDownOpened" GotFocus="lstUsers_GotFocus" BorderThickness="0,0,0,1">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding DisplayName}" />
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                    <Label Grid.Column="1" Grid.Row="4" 
                           Style="{StaticResource LabelStyle}"
                           HorizontalAlignment="Left"
                           Content="Created Date Between" Width="130" />
                    <Grid Grid.Column="3" Grid.Row="4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="5*"  />
                            <ColumnDefinition Width="2*"  />
                            <ColumnDefinition Width="5*" />
                        </Grid.ColumnDefinitions>
                        <DatePicker Grid.Column="0"
                                VerticalContentAlignment="Center" x:Name="startDate" BorderThickness="0,0,0,1" Style="{DynamicResource DatePickerStyle}"/>
                        <Label Grid.Column="1" HorizontalAlignment="Center" Content=" AND "/>
                        <DatePicker Grid.Column="2"  x:Name="endDate"  VerticalAlignment="Center" BorderThickness="0,0,0,1" Style="{DynamicResource DatePickerStyle}"/>

                    </Grid>
                    <DockPanel Grid.Column="3" Grid.Row="5">
                        <TextBox x:Name="txtChangesetId" Width="100" FontSize="14" HorizontalContentAlignment="Center" VerticalContentAlignment="Center"></TextBox>
                        <Button x:Name="btnGoToChangeet" Content="  Go to Changeset  " HorizontalAlignment="Left" Click="btnGoToChangeet_Click"/>

                    </DockPanel>

                    <TextBlock x:Name="txtErrors" Grid.Column="1" Grid.Row="6" Grid.ColumnSpan="4" Visibility="Collapsed" Foreground="{StaticResource ForegroundKeyError}" Margin="0,4,0,2" FontFamily="Trebuchet MS" FontWeight="Bold" />

                </Grid>

                <WrapPanel>
                    <Button  Content="Search" Click="btnSearch_Click" x:Name="btnSearch" Width="71" Height="25" HorizontalAlignment="Right"/>
                    <Button  Content="Export to Excel" x:Name="btnExportToExcel" Width="139" Height="26" HorizontalAlignment="Left" Click="btnExportToExcel_Click" />
                    <Button  Content="Test" Click="btnTest_Click" x:Name="btnTest" Width="71" Height="25" HorizontalAlignment="Left" />


                    <Label x:Name="lblTotalCount" Content="" />
                    <MediaElement 
                        x:Name="loader_Gif" 
                        Source="Resources/loader01.gif"
                        MediaEnded="loader_Gif_MediaEnded" 
                        UnloadedBehavior="Manual"
                        LoadedBehavior="Manual"  
                        Stretch="Fill" Height="20" MediaFailed="loader_Gif_MediaFailed" 
                        Width="20"/>
                </WrapPanel>
            </StackPanel>
        </Grid>

        <ListView DockPanel.Dock="Bottom" x:Name="lstContainer" Background="{StaticResource BackgroundKey}">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <DockPanel LastChildFill="True">
                        <StackPanel DockPanel.Dock="Left" Width="150">
                            <TextBlock>
                                <Hyperlink TargetName="{Binding ChangesetId}" NavigateUri="{Binding ArtifactUri}" RequestNavigate="Hyperlink_RequestNavigate">
                                    <TextBlock Text="{Binding ChangesetId}" />
                                </Hyperlink>
                            </TextBlock>
                            <TextBlock Text="{Binding CommitterDisplayName}" TextWrapping="WrapWithOverflow" Foreground="White" FontSize="12" />
                            <TextBlock Text="{Binding CreationDate}"  FontSize="9" Foreground="White" />
                            
                        </StackPanel>
                        <local:RichTextboxCustomized DockPanel.Dock="Right" FontSize="14" 
                            Width="{Binding Path=ActualWidth, RelativeSource={RelativeSource AncestorType=ListView}}"
                            Background="{StaticResource BackgroundKey}"
                            IsDocumentEnabled="True" BorderThickness="0"
                            IsReadOnly="True" FormattedText="{Binding Comment}" Foreground="White" />
                    </DockPanel>

                    <!--<Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"  />
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <Label>
                                    <Hyperlink TargetName="{Binding ChangesetId}" NavigateUri="{Binding ArtifactUri}" RequestNavigate="Hyperlink_RequestNavigate">
                                        <TextBlock Text="{Binding ChangesetId}" />
                                    </Hyperlink>
                            </Label>
                            <Label Content="{Binding CommitterDisplayName}" Foreground="White" FontSize="12" BorderThickness="0" />
                            <Label Content="{Binding CreationDate}" BorderThickness="0" FontSize="9" />
                        </StackPanel>

                        <local:RichTextboxCustomized Grid.Column="0" FontSize="12" MinWidth="300" HorizontalAlignment="Stretch"
                                Background="{StaticResource BackgroundKey}"
                                IsDocumentEnabled="True" BorderThickness="0"
                                IsReadOnly="True" FormattedText="{Binding Comment}" Foreground="White" />
                    </Grid>-->
                </DataTemplate>
            </ListView.ItemTemplate>
            <!--<ListView.View>
                <GridView>
                    <GridViewColumn Header="Id" Width="50">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Grid.Column="1">
                                    <Hyperlink TargetName="{Binding ChangesetId}" NavigateUri="{Binding ArtifactUri}" RequestNavigate="Hyperlink_RequestNavigate">
                                        <TextBlock Text="{Binding ChangesetId}" />
                                    </Hyperlink>
                                </TextBlock>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Name" Width="150">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Grid.Column="2" Text="{Binding CommitterDisplayName}" Foreground="White" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Comment" Width="264">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                -->
            <!--<local:RichTextboxCustomized Background="{StaticResource BackgroundKey}"-->
            <!--
                                <local:RichTextboxCustomized 
                                    Background="{StaticResource BackgroundKey}"
                                    IsDocumentEnabled="True" BorderThickness="0"
                                    IsReadOnly="True" FormattedText="{Binding Comment}" Foreground="White" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Committed Date" Width="150">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Grid.Column="4" Text="{Binding CreationDate}" TextWrapping="Wrap" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>-->
            <!--<TextBlock Text="{Binding CommitterName}"></TextBlock>-->
        </ListView>

    </DockPanel>


</UserControl>
